<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Audio Intercom Debug</title>
</head>
<body>
  <h2>Debug Test</h2>
  <div id="debug"></div>
  
  <script>
    const debug = document.getElementById('debug');
    
    // Test 1: Check if server is running
    fetch('/').then(r => {
      debug.innerHTML += '<p>✓ Server is running</p>';
    }).catch(e => {
      debug.innerHTML += '<p>✗ Server unreachable</p>';
    });
    
    // Test 2: Check Socket.IO
    const script1 = document.createElement('script');
    script1.src = '/socket.io.js';
    script1.onload = () => {
      debug.innerHTML += '<p>✓ Socket.IO loaded</p>';
    };
    script1.onerror = () => {
      debug.innerHTML += '<p>✗ Socket.IO not found</p>';
    };
    document.head.appendChild(script1);
    
    // Test 3: Check mediasoup-client paths
    const paths = [
      '/node_modules/mediasoup-client/lib/mediasoup-client.js',
      '/node_modules/mediasoup-client/lib/index.js',
      '/node_modules/mediasoup-client/lib/mediasoup-client.min.js',
      '/node_modules/mediasoup-client/build/mediasoup-client.js'
    ];
    
    paths.forEach(path => {
      fetch(path).then(r => {
        if (r.ok) {
          debug.innerHTML += `<p style="color:green">✓ Found: ${path}</p>`;
        } else {
          debug.innerHTML += `<p style="color:red">✗ Not found: ${path} (${r.status})</p>`;
        }
      }).catch(e => {
        debug.innerHTML += `<p style="color:red">✗ Error: ${path}</p>`;
      });
    });
    
    // Test 4: List node_modules content
    setTimeout(() => {
      debug.innerHTML += '<h3>Recommendation:</h3>';
      debug.innerHTML += '<pre>npm list mediasoup-client</pre>';
      debug.innerHTML += '<p>Run this command to verify that mediasoup-client is installed.</p>';
    }, 1000);
  </script>
</body>
</html>
